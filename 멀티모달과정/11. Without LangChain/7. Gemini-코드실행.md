
# 코드 실행 사용 설정

GenerateContentConfig의 tools 매개변수에 ToolCodeExecution 툴을 넣는다. 정확히는 ToolCodeExecution 툴 code_execution라고 이름이 붙여진 Tool 객체를 매개변수로 넣는다.

```python
from google import genai

from google.genai import types

  

client = genai.Client()

  

response = client.models.generate_content(

    model="gemini-2.5-flash",

    contents="1-100까지의 합은 얼마일까?"

    "계산을 위한 코드를 생성하고 파이썬 코드의 내용을 출력해줘. 그리고 코드를 실행하고, 올바르게 계산했는지 확인하세요",

    config=types.GenerateContentConfig(

        tools=[types.Tool(code_execution=types.ToolCodeExecution)]

    ),

)

  

for part in response.candidates[0].content.parts:

    if part.text is not None:

        print(part.text)

    if part.executable_code is not None:

        print(part.executable_code.code)

    if part.code_execution_result is not None:

        print(part.code_execution_result.output)
```

그러면 아래의 그림과 같이 생성형 AI가 연산 등을 진행할 때 직접 계산을 하는 것이 아니라 **스스로 계산을 하는 코드를 짜고 이를 실행 시켜서 그 답을 얻는다.** 즉, 코드를 직접 짜고 실행할 수 있도록 하는 툴인 것이다.

그리고 위 코드의 for문에서 알 수 있듯이, response(응답 내용)에는 응답 텍스트도 있겠지만 생성형 AI가 계산을 하는데 사용한 코드의 내용과 그 코드를 실행한 결과도 포함 되어있다. 

실제로 response.candidates[0].content.parts 안에 각각 text, executable_code.code, code_execution_result.output에 응답 텍스트, 계산을 하는데 사용한 코드, 그 코드를 실행한 결과가 들어있다.

![[Pasted image 20250811173819.png]]
