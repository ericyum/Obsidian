### LangChain 프롬프트 개념 요약

#### PromptTemplate

- **개념**: LLM(대규모 언어 모델)에 입력으로 들어갈 프롬프트의 템플릿을 정의하는 클래스입니다.
    
- **역할**: 고정된 텍스트와 동적으로 변경될 변수(`{variable}`)를 분리하여, 재사용 가능하고 효율적인 프롬프트 관리를 돕습니다.
    
- **사용법**: `PromptTemplate.from_template()` 메서드를 사용하여 템플릿 문자열로부터 객체를 생성하거나, `PromptTemplate` 클래스를 직접 인스턴스화하여 사용합니다. 변수 값을 `.format()` 메서드로 채워서 최종 프롬프트 문자열을 만듭니다.
    

#### partial variables

- **개념**: `PromptTemplate`에서 일부 변수 값을 미리 채워 넣어 새로운 템플릿을 만드는 기능입니다.
    
- **역할**: 여러 변수 중 일부 변수 값은 고정되어 있고, 나머지 변수 값만 그때그때 바뀌는 경우에 유용합니다. 체인의 앞부분에서 얻은 변수 값을 템플릿에 미리 바인딩하고, 체인의 뒷부분에서 나머지 변수를 채울 수 있어 코드를 간결하게 만듭니다.
    
- **사용법**: `PromptTemplate`의 인스턴스 메서드인 `.partial()`을 사용하거나, `PromptTemplate` 객체를 생성할 때 `partial_variables` 매개변수로 딕셔너리 형태로 값을 전달할 수 있습니다.
    

#### load_prompt (YAML 관리)

- **개념**: 프롬프트 템플릿을 코드 외부의 YAML 또는 JSON 파일에 저장하고, 이를 불러와서 사용하는 기능입니다.
    
- **역할**: 프롬프트 내용을 애플리케이션 코드와 분리하여 관리할 수 있게 해줍니다. 이를 통해 프롬프트만 수정하고 싶을 때 코드를 다시 빌드하거나 배포할 필요 없이 외부 파일만 변경하면 됩니다.
    
- **사용법**: `langchain.prompts`의 `load_prompt` 함수를 사용하여 `.yaml` 또는 `.json` 확장자를 가진 파일 경로를 지정해 프롬프트 템플릿을 로드합니다. 파일 내에는 `_type`, `input_variables`, `template` 등의 키를 포함하는 YAML 또는 JSON 구조가 필요합니다.
    

#### ChatPromptTemplate & MessagePlaceholder

- **ChatPromptTemplate**:
    
    - **개념**: 대화형 언어 모델(챗 모델)을 위한 프롬프트 템플릿입니다. 시스템 메시지, 사용자 메시지, AI 메시지 등 역할별 메시지를 리스트 형태로 관리합니다.
        
    - **역할**: LLM과 대화하는 방식에 맞게 구조화된 프롬프트를 생성하며, 각 메시지의 역할을 명확히 지정하여 모델이 더 정확한 답변을 생성하도록 돕습니다.
        
- **MessagePlaceholder**:
    
    - **개념**: `ChatPromptTemplate` 내에서 전체 메시지 목록을 동적으로 삽입할 수 있는 특별한 플레이스홀더입니다.
        
    - **역할**: 대화 기록(`conversation` 히스토리)처럼 메시지 목록이 통째로 들어가는 경우에 사용합니다. 이를 통해 이전 대화 내용을 효과적으로 프롬프트에 포함시킬 수 있습니다.
        

#### FewShotPromptTemplate & ExampleSelector

- **FewShotPromptTemplate**:
    
    - **개념**: 모델에 몇 개의 예시(Few-shot)를 제공하여 원하는 응답 형식을 학습시키는 데 사용되는 프롬프트 템플릿입니다.
        
    - **역할**: 모델이 사용자의 질문에 대해 어떤 스타일이나 형식으로 답변해야 하는지 구체적인 예시를 통해 보여줌으로써 모델의 응답 품질을 향상시킵니다.
        
- **ExampleSelector**:
    
    - **개념**: `FewShotPromptTemplate`와 함께 사용되며, 제공된 많은 예시 중에서 특정 상황에 가장 적합한 예시를 동적으로 선택해주는 기능입니다.
        
    - **역할**: 예시가 너무 많아 프롬프트에 모두 넣기 어려운 경우, `ExampleSelector`는 질문의 내용과 유사도가 높은 예시를 선별하여 프롬프트의 길이를 최적화하고 모델의 성능을 향상시킵니다.