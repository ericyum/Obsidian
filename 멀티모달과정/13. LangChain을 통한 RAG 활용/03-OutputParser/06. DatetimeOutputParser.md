
# DatetimeOutputParser

`DatetimeOutputParser`는 LLM의 출력을 `datetime` 형식으로 파싱하는 데 사용할 수 있습니다.


```python
from dotenv import load_dotenv

load_dotenv()
```

```
True
```


```python
# LangSmith 추적을 설정합니다. https://smith.langchain.com
# !pip install langchain-teddynote
from langchain_teddynote import logging

# 프로젝트 이름을 입력합니다.
logging.langsmith("CH03-OutputParser")
```

```
LangSmith 추적을 시작합니다.
[프로젝트명]
CH03-OutputParser
```

**참고**

|형식 코드|설명|예시|
|---|---|---|
|%Y|4자리 연도|2024|
|%y|2자리 연도|24|
|%m|2자리 월|07|
|%d|2자리 일|04|
|%H|24시간제 시간|14|
|%I|12시간제 시간|02|
|%p|AM 또는 PM|PM|
|%M|2자리 분|45|
|%S|2자리 초|08|
|%f|마이크로초 (6자리)|000123|
|%z|UTC 오프셋|+0900|
|%Z|시간대 이름|KST|
|%a|요일 약어|Thu|
|%A|요일 전체|Thursday|
|%b|월 약어|Jul|
|%B|월 전체|July|
|%c|전체 날짜와 시간|Thu Jul 4 14:45:08 2024|
|%x|전체 날짜|07/04/24|
|%X|전체 시간|14:45:08|

Sheets로 내보내기


```python
from langchain.prompts import PromptTemplate
from langchain_community.llms import OpenAI
from langchain_core.output_parsers import DatetimeOutputParser
from langchain_openai import ChatOpenAI

# DatetimeOutputParser 객체를 생성합니다.
output_parser = DatetimeOutputParser()

# 프롬프트 템플릿을 설정합니다.
template = """
**[질문]**
{question}

**[출력 형식]**
{format_instructions}
"""
prompt = PromptTemplate.from_template(template=template)
```

`get_format_instructions()` 메서드를 사용하여 출력 형식을 확인합니다.


```python
print(output_parser.get_format_instructions())
```

```
Write a datetime string that matches the following pattern: "%Y-%m-%dT%H:%M:%S.%fZ".
Example: `1998-09-04T00:00:00.000000Z`
```

`Chain`을 생성하고 질문에 대한 답변을 받습니다.


```python
# Chain 을 생성합니다.
chain = prompt | ChatOpenAI() | output_parser

# 체인을 호출하여 질문에 대한 답변을 받습니다.
output = chain.invoke({"question": "Google 이 창업한 연도"})
```

결과를 출력합니다.


```python
# 결과를 문자열로 변환
output.strftime("%Y-%m-%d")
```

```
'1998-09-04'
```

결과가 `datetime.datetime` 타입인지 확인합니다.


```python
# 결과의 타입을 확인합니다.
type(output)
```

```
datetime.datetime
```

## datetime 객체를 사용한 다양한 출력 형식


```python
# 연도만 출력
print("연도:", output.year)
# 월만 출력
print("월:", output.month)
# 일만 출력
print("일:", output.day)
# 시만 출력
print("시:", output.hour)
# 분만 출력
print("분:", output.minute)
# 초만 출력
print("초:", output.second)
# 요일 출력 (0:월, 6:일)
print("요일:", output.weekday())
```

```
연도: 1998
월: 9
일: 4
시: 0
분: 0
초: 0
요일: 4
```


```python
# 특정 형식으로 문자열 변환
print(output.strftime("%Y년 %m월 %d일 %A"))
print(output.strftime("%Y/%m/%d"))
print(output.strftime("%H:%M"))
```

```
1998년 09월 04일 Friday
1998/09/04
00:00
```