# EnumOutputParser

LangChain의 `EnumOutputParser`는 언어 모델의 출력을 미리 정의된 열거형(Enum) 값 중 하나로 파싱하는 도구입니다.

## 주요 특징

- **열거형 파싱**: 문자열 출력을 미리 정의된 Enum 값으로 변환합니다.
    
- **타입 안전성**: 파싱된 결과가 반드시 정의된 Enum 값 중 하나임을 보장합니다.
    
- **유연성**: 공백이나 줄바꿈 문자를 자동으로 처리합니다.
    

## 사용 방법

`EnumOutputParser`는 언어 모델의 출력에서 유효한 Enum 값을 추출하는 데 유용하며, 이를 통해 출력 데이터의 일관성을 유지하고 예측 가능성을 높일 수 있습니다. 파서를 사용하려면, 미리 정의된 Enum 값을 설정하고 해당 값을 기준으로 문자열 출력을 파싱합니다.

```python
from dotenv import load_dotenv

load_dotenv()
```

```
True
```


```python
# LangSmith 추적을 설정합니다. https://smith.langchain.com
# !pip install langchain-teddynote
from langchain_teddynote import logging

# 프로젝트 이름을 입력합니다.
logging.langsmith("CH03-OutputParser")
```

```
LangSmith 추적을 시작합니다.
[프로젝트명]
CH03-OutputParser
```


```python
from enum import Enum

from langchain.chains import LLMChain
from langchain_core.prompts import PromptTemplate
from langchain_openai import ChatOpenAI
from langchain.output_parsers import EnumOutputParser

# LangChain의 EnumOutputParser를 사용하기 위해 Enum 객체를 정의합니다.
class Colors(Enum):
    RED = "빨간색"
    GREEN = "녹색"
    BLUE = "파란색"
    YELLOW = "노란색"
    BLACK = "검정색"
```

```python
# EnumOutputParser를 사용하여 Enum 객체를 파서에 전달합니다.
parser = EnumOutputParser(enum=Colors)
```

`parser.get_format_instructions()` 메서드를 사용하여 출력 형식을 확인합니다.

```python
# 파서의 지시사항을 출력합니다.
print(parser.get_format_instructions())
```

```
Select one of the following values: 빨간색, 녹색, 파란색, 노란색, 검정색
```

프롬프트 템플릿을 설정하고 체인을 생성합니다.


```python
# 프롬프트 템플릿을 설정합니다.
prompt = PromptTemplate(
    input_variables=["object"],
    template="어떤 {object}의 색상을 한 가지 선택하세요.\\n{format_instructions}",
    partial_variables={"format_instructions": parser.get_format_instructions()},
)

# LLMChain을 생성합니다.
chain = LLMChain(llm=ChatOpenAI(temperature=0), prompt=prompt, output_parser=parser)
```

체인을 실행하여 `하늘`의 색상에 대한 답변을 받습니다.


```python
# 체인을 실행합니다.
response = chain.invoke({"object": "하늘"})
print(response)
```

```
Colors.BLUE
```

결과를 확인합니다.


```python
# 출력의 타입을 확인합니다.
type(response)
```

```
<enum 'Colors'>
```


```python
# 출력의 값들을 확인합니다.
response.value
```

```
'파란색'
```