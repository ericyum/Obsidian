# 토큰 사용량 확인

특정 호출에 대한 토큰 사용량을 추적하는 방법에 대해 설명합니다. 이 기능은 현재 OpenAI API에만 구현되어 있습니다. 먼저 단일 Chat 모델 호출에 대한 토큰 사용량을 추적하는 간단한 예를 살펴보겠습니다.



```python
from langchain.callbacks import get_openai_callback
from langchain_openai import ChatOpenAI

# 모델을 불러옵니다.
llm = ChatOpenAI(model_name="gpt-4.1-mini")
```

`with get_openai_callback()` 구문 안에서 실행되는 모든 토큰 사용량/요금이 추적됩니다.



```python
# callback을 사용하여 추적합니다.
with get_openai_callback() as cb:
    result = llm.invoke("대한민국의 수도는 어디야?")
    print(cb)
```

```
Tokens Used: 23
	Prompt Tokens: 15
		Prompt Tokens Cached: 0
	Completion Tokens: 8
		Reasoning Tokens: 0
Successful Requests: 1
Total Cost (USD): $1.8800000000000003e-05
```



```python
# callback을 사용하여 추적합니다.
with get_openai_callback() as cb:
    result = llm.invoke("대한민국의 수도는 어디야?")
    result = llm.invoke("대한민국의 수도는 어디야?")
    print(f"총 사용된 토큰수: \t\t{cb.total_tokens}")
    print(f"프롬프트에 사용된 토큰수: \t{cb.prompt_tokens}")
    print(f"답변에 사용된 토큰수: \t{cb.completion_tokens}")
    print(f"호출에 청구된 금액(USD): \t${cb.total_cost}")
```

```
총 사용된 토큰수: 		46
프롬프트에 사용된 토큰수: 	30
답변에 사용된 토큰수: 	16
호출에 청구된 금액(USD): 	$3.7600000000000006e-05
```