
# Google AI chat models (gemini-pro)

Google AI의 `gemini`와 `gemini-vision` 모델뿐만 아니라 다른 생성 모델에 접근하려면 [langchain-google-genai](https://pypi.org/project/langchain-google-genai/) 통합 패키지의 `ChatGoogleGenerativeAI` 클래스를 사용하면 됩니다.



```python
# !pip install -qU langchain-google-genai
```

### API KEY 발급받기

- [링크](https://makersuite.google.com/app/apikey?hl=ko) 에서 API KEY를 발급받아주세요.
    
- 사용자의 Google API 키를 환경 변수 `GOOGLE_API_KEY`로 설정합니다.
    



```python
from dotenv import load_dotenv

load_dotenv()
```

```
True
```



```python
# LangSmith 추적을 설정합니다. https://smith.langchain.com
# !pip install langchain-teddynote
from langchain_teddynote import logging
from langchain_teddynote.messages import stream_response

# 프로젝트 이름을 입력합니다.
logging.langsmith("CH04-Models")
```

```
LangSmith 추적을 시작합니다.
[프로젝트명]
CH04-Models
```

`langchain_google_genai` 패키지에서 `ChatGoogleGenerativeAI` 클래스를 가져옵니다.

- `ChatGoogleGenerativeAI` 클래스는 Google의 Generative AI 모델을 사용하여 대화형 AI 시스템을 구현하는 데 사용됩니다.
    
- 이 클래스를 통해 사용자는 Google의 대화형 AI 모델과 상호 작용할 수 있습니다.
    
- 모델과의 대화는 채팅 형식으로 이루어지며, 사용자의 입력에 따라 모델이 적절한 응답을 생성합니다.
    
- `ChatGoogleGenerativeAI` 클래스는 LangChain 프레임워크와 통합되어 있어, 다른 LangChain 컴포넌트와 함께 사용할 수 있습니다.
    

지원되는 모델 정보: [https://ai.google.dev/gemini-api/docs/models/gemini?hl=ko](https://ai.google.dev/gemini-api/docs/models/gemini?hl=ko)



```python
from langchain_google_genai import ChatGoogleGenerativeAI

# ChatGoogleGenerativeAI 언어 모델을 초기화합니다.
llm = ChatGoogleGenerativeAI(model="gemini-1.5-pro-latest")

# 프롬프트를 전달하여 결과를 생성합니다.
answer = llm.stream("자연어처리에 대해서 간략히 설명해 줘")

# 결과를 출력합니다.
stream_response(answer)
```

```
자연어 처리(Natural Language Processing, NLP)는 컴퓨터가 인간의 언어를 이해하고 처리하며 생성할 수 있도록 하는 인공지능의 한 분야입니다. 간단히 말해, 컴퓨터와 사람이 언어를 통해 소통할 수 있도록 하는 기술입니다.

NLP는 다음과 같은 다양한 작업을 수행합니다.

* **이해 (Understanding):** 텍스트의 의미, 감정, 의도 등을 파악합니다. 예: 텍스트 분류, 감정 분석, 질의응답
* **생성 (Generation):** 새로운 텍스트를 생성합니다. 예: 기계 번역, 챗봇, 텍스트 요약
* **처리 (Processing):** 텍스트 데이터를 정제하고 변환합니다. 예: 형태소 분석, 구문 분석, 오타 교정

**핵심 기술 및 구성 요소:**

* **토큰화 (Tokenization):** 텍스트를 단어 또는 문장과 같은 작은 단위로 나눕니다.
* **품사 태깅 (Part-of-Speech Tagging):** 각 단어의 품사(명사, 동사, 형용사 등)를 식별합니다.
* **구문 분석 (Parsing):** 문장의 구조를 분석합니다.
* **의미 분석 (Semantic Analysis):** 텍스트의 의미를 이해합니다.
* **말뭉치 (Corpus):** NLP 모델 학습에 사용되는 대량의 텍스트 데이터입니다.
* **머신러닝 (Machine Learning):** NLP 작업을 수행하기 위한 알고리즘과 모델을 학습합니다. 딥러닝은 특히 최근 NLP 발전에 큰 기여를 하고 있습니다.

**활용 분야:**

* **기계 번역:** 서로 다른 언어 간의 번역
* **챗봇:** 사용자와 자연어로 대화하는 프로그램
* **텍스트 요약:** 긴 텍스트를 짧게 요약
* **감정 분석:** 텍스트에서 표현된 감정을 분석
* **검색 엔진:** 사용자의 검색어를 이해하고 관련 있는 결과를 제공
* **음성 인식:** 음성을 텍스트로 변환


NLP는 끊임없이 발전하고 있으며, 우리의 일상생활에 점점 더 깊숙이 스며들고 있습니다. 더욱 정교하고 자연스러운 인간-컴퓨터 상호작용을 가능하게 하는 미래의 핵심 기술 중 하나입니다.
```



```python
from langchain_core.prompts import PromptTemplate

# ChatGoogleGenerativeAI 언어 모델을 초기화합니다.
model = ChatGoogleGenerativeAI(
    model="gemini-1.5-flash-latest",  # 사용할 모델을 지정합니다.
)

# 프롬프트를 생성합니다.
prompt = PromptTemplate.from_template(
    "예/아니오 질문에 대답하세요. {question}는 과일입니까?"
)

# 체인을 생성합니다.
chain = prompt | model

# 결과를 출력합니다.
stream_response(chain.stream({"question": "사과"}))
```

```
네.
```

## Safety Settings

Gemini 모델에는 기본 안전 설정(Safety Settings) 이 있지만, 이를 재정의할 수 있습니다.

만약 모델로부터 많은 "Safety Warnings"를 받고 있다면, 모델의 `safety_settings` 속성을 조정해 볼 수 있습니다.

Google의 [Safety Setting Types](https://ai.google.dev/api/python/google/generativeai/types/SafetySettingDict) 문서에서는 사용 가능한 카테고리와 임계값에 대한 열거형 정보를 제공합니다.

이 문서에는 콘텐츠 필터링 및 안전 설정과 관련된 다양한 카테고리와 해당 임계값이 정의되어 있어, 개발자들이 생성형 AI 모델을 활용할 때 적절한 안전 설정을 선택하고 적용하는 데 도움을 줍니다.

이를 통해 개발자들은 모델이 생성하는 콘텐츠의 안전성과 적절성을 보장하고, 사용자에게 유해하거나 부적절한 내용이 노출되는 것을 방지할 수 있습니다.



```python
from langchain_google_genai import (
    ChatGoogleGenerativeAI,
    HarmBlockThreshold,
    HarmCategory,
)

llm = ChatGoogleGenerativeAI(
    # 사용할 모델을 "gemini-pro"로 지정합니다.
    model="gemini-1.5-pro-latest",
    safety_settings={
        # 위험한 콘텐츠에 대한 차단 임계값을 설정합니다.
        # 이 경우 위험한 콘텐츠를 차단하지 않도록 설정되어 있습니다. (그럼에도 기본적인 차단이 있을 수 있습니다.)
        HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT: HarmBlockThreshold.BLOCK_NONE,
        HarmCategory.HARM_CATEGORY_HATE_SPEECH: HarmBlockThreshold.BLOCK_NONE,
        HarmCategory.HARM_CATEGORY_HARASSMENT: HarmBlockThreshold.BLOCK_NONE,
        HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT: HarmBlockThreshold.BLOCK_NONE,
    },
)
```

## Batch 단위 실행



```python
from langchain_google_genai import ChatGoogleGenerativeAI

llm = ChatGoogleGenerativeAI(
    # 사용할 모델을 "gemini-pro"로 지정합니다.
    model="gemini-1.5-pro-latest",
)

results = llm.batch(
    [
        "대한민국의 수도는?",
        "대한민국의 주요 관광지 5곳을 나열하세요",
    ]
)

for res in results:
    # 각 결과의 내용을 출력합니다.
    print(res.content)
```

```
대한민국의 수도는 서울입니다.
대한민국의 주요 관광지 5곳은 다음과 같습니다:

1. **서울:** 대한민국의 수도이며, 역사적인 궁궐 (경복궁, 창덕궁 등), 현대적인 건축물 (롯데월드타워, N서울타워), 활기 넘치는 쇼핑 거리 (명동, 강남), 그리고 다양한 문화 체험을 즐길 수 있는 곳입니다.

2. **제주도:** 화산섬 제주도는 아름다운 자연 경관으로 유명합니다. 한라산, 성산일출봉, 만장굴과 같은 유네스코 세계자연유산을 비롯하여 다양한 해변과 박물관 등을 즐길 수 있습니다.

3. **부산:** 대한민국 제2의 도시이자 최대의 항구 도시인 부산은 해운대, 광안리와 같은 아름다운 해변과  활기 넘치는 야시장,  다양한 해산물 요리를 맛볼 수 있는 곳입니다.  국제 영화제 개최지로도 유명합니다.

4. **경주:** 신라 천년의 고도인 경주는 불국사, 석굴암, 첨성대 등 수많은 역사 유적지를 보유하고 있어  역사와 문화를 체험하기에 좋은 곳입니다.

5. **전주:** 전라북도의 중심 도시인 전주는 전주 한옥마을로 유명합니다.  전통 한옥과 한복 체험,  비빔밥과 같은 전통 음식을 즐길 수 있습니다.


이 외에도 설악산, 지리산과 같은 국립공원, DMZ, 그리고 평창과 같은 동계 스포츠 관광지도 인기가 있습니다.
```