Phase 1: MVP 구축
![[Pasted image 20250903141528.png]]

1. Loader
2.

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어 가시 달린 꽃은 자기 중심에만 매달려 있는 것으로 보이는 사람들을 상징하는 것으로 해석될 수 있습니다. 이는 어린 왕자가 세상을 탐험하며 만나는 다양한 인간들 중에서 자기 중심적이고 이기적인 사람들을 의미하는 것으로 해석될 수 있습니다.
```

답변 근거 (책 원문)

```
36  
“도대체 가시는 왜 달려 있는 거냐고?”
어린 왕자는 일단 질문을 하면 절대 포기하지 않았다. 나는 나
사 때문에 신경이 날카로운 상태라 아무렇게나 대답해 버렸다.
“가시는 괜히 있는 거야. 꽃이 괜히 심통 부리는 거지.”
“아!”
그러나 잠시 잠자코 있던 어린 왕자가 나에게 앙갚음하듯 
쏘아붙였다.
“아저씨 말을 믿으라고? 꽃은 약해. 순진하기도 하고. 나름 자
신을 지켜 내지. 자기들이 대단한 줄 알지, 가시가 있으니까…”
아무 대꾸도 하지 않았다. 그 순간 나는 “이 볼트가 끝내 
빠지지 않으면 망치로 두들겨 부숴야지.” 하고 중얼거리고 
있었다. 어린 왕자는 또다시 내 생각을 방해했다.
“그럼 아저씨는 그렇게 믿는 거야. 꽃들이…”
“아니지! 그건 아니지! 난 아무것도 믿지 않아! 되는 대로 
대답한 거야. 심각한 일로 바쁘거든!”
깜짝 놀란 그가 나를 쏘아보았다.
“심각한 일이라고?”
시커먼 기름투성이 손가락으로 망치를 손에 든 채, 매우 
지저분하게 보이는 물체 위로 몸을 기울이고 있는 나의 모습
을 그가 바라보고 있었다.
“꼭 어른처럼 말하네!”
그 말에 나는 조금 부끄러워졌다. 그런데도 그는 매정했다.
“모든 걸 혼동하고 있어… 모든 걸 뒤죽박죽으로 만들어!”
그는 정말 뿔이 잔뜩 나 있었다. 진한 금발이 바람에 흩날
리고 있었다.
“내가 아는 어느 별에 시뻘건 신사가 하나 살고 있어. 그
는 꽃향기라고는 맡아 본 적이 없어. 별 하나 바라본 적 없
고. 누구를 사랑해 본 적도 없지. 계산 말고는 아무것도 해본 
게 없거든. 그래서 온종일 아저씨처럼 ‘나는 심각한 사람이
야! 심각한 사람이라고!’ 되뇌지. 그래서 오만으로 가득 차 
있어. 하지만 그건 사람이 아니야, 버섯이지!”
“뭐라고?”
“버섯이라니까!”
어린 왕자의 얼굴은 너무 심한 분
노로 창백해져 있었다.
“수백만 년 전부터 꽃들은 가시를 
만들어 왔어. 양들은 수백만 년 전부
터 그 꽃을 먹어 왔고. 그런데도 꽃
들이 아무 쓸모 없는 가시를 만드느

--- 

103102  
어린 왕자는 다시 장미들을 보러 갔다.
“너희들은 내 장미와 조금도 닮지 않았어. 너희들은 아직 
아무것도 아니야.”
꽃들에게 어린 왕자가 말했다.
“아무도 너희들을 길들이지 않았고 너희들도 누구 하나 길
들이지 않았어. 너희들은 예전의 내 여우와 같아. 내 여우는 
세상에 흔한 다른 여우들과 똑같은 여우에 지나지 않았어. 
하지만 내가 그를 친구로 삼았기 때문에 그는 이제 세상에 
오직 하나뿐인 여우가 되었지.”
그러자 장미꽃들은 무척 당황했다.
“너희들은 아름답지만 비어 있지.”
어린 왕자가 계속 말했다.
“누구도 너희들을 위해서 죽을 수 없으니까. 물론 그냥 지
나가는 사람에겐 내 꽃도 너희들과 똑같아 보이겠지. 하지만 
내겐 그 꽃 한 송이가 너희들 모두보다 중요해. 내가 물을 준 
꽃이고, 유리덮개를 씌워 준 꽃이기 때문이지. 내가 바람막
이로 막아 준 꽃이기 때문이지. 내가 벌레를 잡아 준
(나비가 
되라고 두세 마리 남겨둔 것 말고) 꽃이기 때문이지. 불평을 들어
주고, 허풍을 들어주고, 심지어 때로는 조용히 침묵을 기다
려 준 꽃이기 때문이지. 그러니까 내 장미이기 때문이지.”
그리고 그는 여우에게로 돌아갔다.
“잘 있어.”
그가 말했다.
“잘 가.”
여우가 말했다.
“내 비밀은 이거야. 아주 단순하지. 마음으로 보아야만 잘 
보인다는 거야. 본질적인 건 눈에 보이지 않아.”
“본질적인 건 눈에 보이지 않아.”
잊지 않으려고 어린 왕자가 따라 말했다.
“네 장미꽃을 그토록 소중하게 만든 건 네가 네 꽃에 바친 
시간이란다.”
“내가 내 꽃에 바친 시간이라…”
잘 기억하기 위해 어린 왕자가 말했다.
“사람들은 이 진실을 잊어버렸어.”
여우가 말했다.
“하지만 잊어버리면 안 돼. 네가 길들인 것에 대해 넌 언
제나 책임이 있어. 너는 네 장미에 대해 책임이 있어…”
“나는 내 장미에 대해 책임이 있어…”
잊지 않으려 어린 왕자가 되풀이했다.

--- 

8584  
니. 너의 별이 너무 그리울 때면 언제고 내가 너를 도와줄 수 
있을 거야. 난…”
“아! 잘 알겠어. 그런데 넌 줄곧 수수께끼 같은 말만 하는 
거니?”
“난 수수께끼를 모두 풀어.”
뱀이 말했다.
그리고 그들은 아무 말이 없었다.
ⅩⅧ
어린 왕자가 사막을 건너면서 만난 것은 오직 꽃 한 송이
뿐이다. 꽃잎 세 개짜리 아무것도 아닌 꽃 한 송이…
“안녕.”
어린 왕자가 말했다.
“안녕.”
꽃이 말했다.
“사람들은 어디 있지?”
어린 왕자가 얌전하게 물었다.
그 꽃은 언젠가 대상 한 무리가 지나가는 것을 본 적이 있
었다.
“사람들이라고? 예닐곱 명 정도 있는 것 같아. 몇 해 전에 
그들을 보았지! 하지만 어디 가야 만날지는 전혀 알 수 없지.
```

Phase 2: Chunking 및 Prompt 개선

Chunking 개선

 결과를 분석해보면, 현재 MVP의 한계가 명확히 보입니다.
   * AI 답변: "자기 중심적인 사람들을 상징한다"고 해석했는데, 함께 검색된 '답변 근거'에 나오는 여우와의 대화(사랑, 책임, 소중함) 내용은 제대로 반영하지 못했습니다.
   * 원인: 기본 프롬프트의 한계로 인해, 검색된 여러 정보 중 일부 내용에만 치우쳐 답변을 생성한 것으로 보입니다.

  이 문제를 해결하기 위해, 계획했던 Phase 2: Chunking 및 Prompt 개선을 시작하겠습니다.


  가장 먼저, Chunking 전략부터 수정해 보겠습니다. 현재 1000글자 단위로 문서를 자르는 방식이 너무 크고, 여러 주제가 섞여 들어갈 수 있습니다. 청크 크기를 500으로 줄여서 좀 더 주제에 집중된 텍스트 조각을 만들어 보겠습니다.

![[Pasted image 20250903155236.png]]

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어서 가시 달린 꽃은 그의 소중한 장미꽃을 나타냅니다. 장미꽃은 어린 왕자에게 특별한 의미를 지니며, 그의 여정과 성장에 중요한 영향을 미칩니다.
```

답변 근거 (책 원문)

```
8584  
니. 너의 별이 너무 그리울 때면 언제고 내가 너를 도와줄 수 
있을 거야. 난…”
“아! 잘 알겠어. 그런데 넌 줄곧 수수께끼 같은 말만 하는 
거니?”
“난 수수께끼를 모두 풀어.”
뱀이 말했다.
그리고 그들은 아무 말이 없었다.
ⅩⅧ
어린 왕자가 사막을 건너면서 만난 것은 오직 꽃 한 송이
뿐이다. 꽃잎 세 개짜리 아무것도 아닌 꽃 한 송이…
“안녕.”
어린 왕자가 말했다.
“안녕.”
꽃이 말했다.
“사람들은 어디 있지?”
어린 왕자가 얌전하게 물었다.
그 꽃은 언젠가 대상 한 무리가 지나가는 것을 본 적이 있
었다.
“사람들이라고? 예닐곱 명 정도 있는 것 같아. 몇 해 전에 
그들을 보았지! 하지만 어디 가야 만날지는 전혀 알 수 없지.

--- 

9190  
ⅩⅩ
그러나 어린 왕자는 오랫동안 모래밭, 바위더미, 눈길을 
헤매고서야 마침내 길을 하나 발견했다. 그리고 길은 모두 
사람 사는 곳으로 통하는 법이다.
“안녕.”
그가 말했다.
장미가 피어 있는 정원이었다.
“안녕.”
장미꽃들이 말했다.
어린 왕자는 꽃들을 바라보았다. 모두가 자신의 꽃과 닮아 
있었다.
“여러분은 누구세요?”
깜짝 놀란 어린 왕자가 꽃들에게 물었다.
“우리는 장미야.”
꽃들이 말했다.
“아!”
어린 왕자는 그만 할 말을 잃고 말았다.
그래서 어린 왕자는 자기가 불행하다고 생각했다. 어린 왕
자의 장미는 자기 품종으로는 자신이 유일한 꽃이라 말해 왔
으니까. 그런데 이 정원 하나에만도 똑 닮은 꽃들이 오천 송
이가 피어 있으니!
어린 왕자는 생각했다. 
‘내 꽃이 이걸 보면 몹시 속상해하겠지… 심하게 콜록거리
면서 창피당하지 않으려 죽는 시늉을 할 걸. 그러면 나는 돌

--- 

이 어린 왕자의 정체를 탐구하는 어른의 여정이 동시에 전개
되고 있습니다. 두 인물은 헤어지지만 서로 길들어 화자는 
별에 핀 꽃을 보며 별들의 웃음소리를 듣고, 어린 왕자는 사
막의 숨겨진 우물을 보고 남들에게는 들리지 않는 도르래 소
리를 들으며 행복하게 살아갑니다. 마음으로 세상을 보게 된 
것입니다.
사실 어린 왕자는 누구나 그러하듯 순수하기만 한 어린아
이가 아니었지요. 사랑을 모르던 그는 자신을 까탈스럽게 대
하는 장미가 귀찮아져 새로운 친구와 일자리를 구하고 깨달
음도 얻을 겸 여섯 별을 유람합니다. 우스꽝스러운 왕, 허영
쟁이, 술 아저씨, 사업가, 지리학자를 만나 실망하기도 하
고, 자기 자신이 아닌 다른 누군가를 위해 열심히 일하는 가
로등지기에게 마음을 빼앗기기도 합니다. 
하지만 정직한 대화가 불가능했기에 이 어른들과 친구가 
될 수는 없었습니다. 
마지막 별 지구에 도착하여 처음 만난 뱀은 어린 왕자를
```

✦ 결과가 훨씬 좋아졌네요!


  분석:
   * AI 답변: 이전처럼 '자기 중심적인 사람을 상징한다'는 잘못된 해석 대신, '소중한 장미꽃'이라는 핵심을 정확히 짚어냈습니다. Chunking 전략을 바꾼 것이 긍정적인 효과를 가져온 것입니다.
   * 답변 근거: 하지만 여전히 '역자 후기'나 관련성이 떨어지는 '사막의 꽃' 부분이 검색되고 있습니다. 이 때문에 AI의 답변이 아직은 "소중하다"는 수준에 머물러 있고, '왜' 소중한지에 대한 깊이(예: 책임감, 길들임)까지는 나아가지 못하고 있습니다.

Prompt 개선

검색된 근거에 관련 없는 내용이 섞여 있더라도, LLM에게 "당신은 전문가이니, 본문 내용에만 집중해서 깊이 있게 답변해" 라고 명확한 지시를 내리면 답변의 품질을 한 단계 더 끌어올릴 수 있습니다.

![[Pasted image 20250903155208.png]]

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어 가시 달린 꽃은 그의 장미꽃이었습니다. 처음에는 자신의 별에서 자란 유일한 꽃이라고 생각했지만, 다른 장미꽃들을 보고 자신의 특별함을 의심하게 되었습니다. 이로 인해 어린 왕자는 자신의 장미꽃을 더 소중히 여기게 되었습니다.
```

답변 근거 (책 원문)

```
8584  
니. 너의 별이 너무 그리울 때면 언제고 내가 너를 도와줄 수 
있을 거야. 난…”
“아! 잘 알겠어. 그런데 넌 줄곧 수수께끼 같은 말만 하는 
거니?”
“난 수수께끼를 모두 풀어.”
뱀이 말했다.
그리고 그들은 아무 말이 없었다.
ⅩⅧ
어린 왕자가 사막을 건너면서 만난 것은 오직 꽃 한 송이
뿐이다. 꽃잎 세 개짜리 아무것도 아닌 꽃 한 송이…
“안녕.”
어린 왕자가 말했다.
“안녕.”
꽃이 말했다.
“사람들은 어디 있지?”
어린 왕자가 얌전하게 물었다.
그 꽃은 언젠가 대상 한 무리가 지나가는 것을 본 적이 있
었다.
“사람들이라고? 예닐곱 명 정도 있는 것 같아. 몇 해 전에 
그들을 보았지! 하지만 어디 가야 만날지는 전혀 알 수 없지.

--- 

9190  
ⅩⅩ
그러나 어린 왕자는 오랫동안 모래밭, 바위더미, 눈길을 
헤매고서야 마침내 길을 하나 발견했다. 그리고 길은 모두 
사람 사는 곳으로 통하는 법이다.
“안녕.”
그가 말했다.
장미가 피어 있는 정원이었다.
“안녕.”
장미꽃들이 말했다.
어린 왕자는 꽃들을 바라보았다. 모두가 자신의 꽃과 닮아 
있었다.
“여러분은 누구세요?”
깜짝 놀란 어린 왕자가 꽃들에게 물었다.
“우리는 장미야.”
꽃들이 말했다.
“아!”
어린 왕자는 그만 할 말을 잃고 말았다.
그래서 어린 왕자는 자기가 불행하다고 생각했다. 어린 왕
자의 장미는 자기 품종으로는 자신이 유일한 꽃이라 말해 왔
으니까. 그런데 이 정원 하나에만도 똑 닮은 꽃들이 오천 송
이가 피어 있으니!
어린 왕자는 생각했다. 
‘내 꽃이 이걸 보면 몹시 속상해하겠지… 심하게 콜록거리
면서 창피당하지 않으려 죽는 시늉을 할 걸. 그러면 나는 돌

--- 

이 어린 왕자의 정체를 탐구하는 어른의 여정이 동시에 전개
되고 있습니다. 두 인물은 헤어지지만 서로 길들어 화자는 
별에 핀 꽃을 보며 별들의 웃음소리를 듣고, 어린 왕자는 사
막의 숨겨진 우물을 보고 남들에게는 들리지 않는 도르래 소
리를 들으며 행복하게 살아갑니다. 마음으로 세상을 보게 된 
것입니다.
사실 어린 왕자는 누구나 그러하듯 순수하기만 한 어린아
이가 아니었지요. 사랑을 모르던 그는 자신을 까탈스럽게 대
하는 장미가 귀찮아져 새로운 친구와 일자리를 구하고 깨달
음도 얻을 겸 여섯 별을 유람합니다. 우스꽝스러운 왕, 허영
쟁이, 술 아저씨, 사업가, 지리학자를 만나 실망하기도 하
고, 자기 자신이 아닌 다른 누군가를 위해 열심히 일하는 가
로등지기에게 마음을 빼앗기기도 합니다. 
하지만 정직한 대화가 불가능했기에 이 어른들과 친구가 
될 수는 없었습니다. 
마지막 별 지구에 도착하여 처음 만난 뱀은 어린 왕자를
```

✦ 훌륭합니다! 이것이 바로 저희가 원했던 결과입니다.

  최종 분석:


   * Baseline: "자기 중심적인 사람을 상징한다"는 잘못된 답변을 했습니다.
   * 1차 개선 (Chunking): "소중한 장미꽃"이라고 핵심은 맞췄지만, 답변이 다소 피상적이었습니다.
   * 2차 개선 (Chunking + Prompt): "다른 장미들을 보고 특별함을 의심했지만, 그로 인해 오히려 자신의 장미를 더 소중히 여기게 되었다"는 책의 실제 내러티브와 감정선을 정확히 요약해냈습니다.


  보시다시피, '답변 근거'에는 여전히 관련 없는 내용이 섞여 있었지만, 정교한 프롬프트가 LLM을 훌륭하게 통제하여 검색된 정보들을 취사선택하고, 그 의미를 종합하여 깊이 있는 답변을 만들어냈습니다.

  이것으로 Phase 2: Chunking 및 Prompt 개선의 모든 목표를 달성했습니다.




 Phase 3: Retriever

이제, 마지막 단계로 넘어가겠습니다. 우리는 똑똑한 LLM과 프롬프트 덕분에 "나쁜 재료(관련 없는 근거)가 들어와도 좋은 요리(답변)를 만드는" 데 성공했습니다. 하지만 애초에 "좋은 재료만 가져오게" 만들 수 있다면 시스템이 훨씬 더 효율적이고 강력해지겠죠?


  Phase 3: Retriever 개선에서는 바로 이 '재료'를 가져오는 검색기 자체를 업그레이드하겠습니다.

  이전과 같이, `MultiQueryRetriever`를 도입하여 질문을 여러 관점에서 검색하고, 더 풍부하고 정확한 '답변 근거'를 찾아오도록 만들겠습니다.
  
![[Pasted image 20250903160522.png]]

![[Pasted image 20250903160535.png]]

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어 가시 달린 꽃은 자신의 장미와의 특별한 연결고리를 상징하는 존재입니다. 어린 왕자는 자신의 장미를 특별하게 여기며, 그 꽃을 통해 소중한 우정과 사랑을 경험하였기 때문에 다른 꽃들과의 유사함에 대해 혼란스러워하고 불행해하는 모습을 보입니다. 그렇기 때문에 가시 달린 꽃은 어린 왕자에게는 특별하고 소중한 존재로서의 상징이 됩니다.
```

답변 근거 (책 원문)

```
103102  
어린 왕자는 다시 장미들을 보러 갔다.
“너희들은 내 장미와 조금도 닮지 않았어. 너희들은 아직 
아무것도 아니야.”
꽃들에게 어린 왕자가 말했다.
“아무도 너희들을 길들이지 않았고 너희들도 누구 하나 길
들이지 않았어. 너희들은 예전의 내 여우와 같아. 내 여우는 
세상에 흔한 다른 여우들과 똑같은 여우에 지나지 않았어. 
하지만 내가 그를 친구로 삼았기 때문에 그는 이제 세상에 
오직 하나뿐인 여우가 되었지.”
그러자 장미꽃들은 무척 당황했다.
“너희들은 아름답지만 비어 있지.”
어린 왕자가 계속 말했다.
“누구도 너희들을 위해서 죽을 수 없으니까. 물론 그냥 지
나가는 사람에겐 내 꽃도 너희들과 똑같아 보이겠지. 하지만 
내겐 그 꽃 한 송이가 너희들 모두보다 중요해. 내가 물을 준 
꽃이고, 유리덮개를 씌워 준 꽃이기 때문이지. 내가 바람막
이로 막아 준 꽃이기 때문이지. 내가 벌레를 잡아 준
(나비가

--- 

9190  
ⅩⅩ
그러나 어린 왕자는 오랫동안 모래밭, 바위더미, 눈길을 
헤매고서야 마침내 길을 하나 발견했다. 그리고 길은 모두 
사람 사는 곳으로 통하는 법이다.
“안녕.”
그가 말했다.
장미가 피어 있는 정원이었다.
“안녕.”
장미꽃들이 말했다.
어린 왕자는 꽃들을 바라보았다. 모두가 자신의 꽃과 닮아 
있었다.
“여러분은 누구세요?”
깜짝 놀란 어린 왕자가 꽃들에게 물었다.
“우리는 장미야.”
꽃들이 말했다.
“아!”
어린 왕자는 그만 할 말을 잃고 말았다.
그래서 어린 왕자는 자기가 불행하다고 생각했다. 어린 왕
자의 장미는 자기 품종으로는 자신이 유일한 꽃이라 말해 왔
으니까. 그런데 이 정원 하나에만도 똑 닮은 꽃들이 오천 송
이가 피어 있으니!
어린 왕자는 생각했다. 
‘내 꽃이 이걸 보면 몹시 속상해하겠지… 심하게 콜록거리
면서 창피당하지 않으려 죽는 시늉을 할 걸. 그러면 나는 돌

--- 

8584  
니. 너의 별이 너무 그리울 때면 언제고 내가 너를 도와줄 수 
있을 거야. 난…”
“아! 잘 알겠어. 그런데 넌 줄곧 수수께끼 같은 말만 하는 
거니?”
“난 수수께끼를 모두 풀어.”
뱀이 말했다.
그리고 그들은 아무 말이 없었다.
ⅩⅧ
어린 왕자가 사막을 건너면서 만난 것은 오직 꽃 한 송이
뿐이다. 꽃잎 세 개짜리 아무것도 아닌 꽃 한 송이…
“안녕.”
어린 왕자가 말했다.
“안녕.”
꽃이 말했다.
“사람들은 어디 있지?”
어린 왕자가 얌전하게 물었다.
그 꽃은 언젠가 대상 한 무리가 지나가는 것을 본 적이 있
었다.
“사람들이라고? 예닐곱 명 정도 있는 것 같아. 몇 해 전에 
그들을 보았지! 하지만 어디 가야 만날지는 전혀 알 수 없지.

--- 

키 작은 나무는 이내 성장을 멈추고 꽃 피울 준비를 했다. 어
린 왕자는 커다랗게 뻗어 가는 꽃망울을 지켜보다 거기에서 
어떤 기적이 나타나리라 직감하였다. 그러나 꽃은 초록 봉오
리 안에 숨어 미모를 다듬고 있었다. 꽃은 세심하게 색깔을

--- 

이 어린 왕자의 정체를 탐구하는 어른의 여정이 동시에 전개
되고 있습니다. 두 인물은 헤어지지만 서로 길들어 화자는 
별에 핀 꽃을 보며 별들의 웃음소리를 듣고, 어린 왕자는 사
막의 숨겨진 우물을 보고 남들에게는 들리지 않는 도르래 소
리를 들으며 행복하게 살아갑니다. 마음으로 세상을 보게 된 
것입니다.
사실 어린 왕자는 누구나 그러하듯 순수하기만 한 어린아
이가 아니었지요. 사랑을 모르던 그는 자신을 까탈스럽게 대
하는 장미가 귀찮아져 새로운 친구와 일자리를 구하고 깨달
음도 얻을 겸 여섯 별을 유람합니다. 우스꽝스러운 왕, 허영
쟁이, 술 아저씨, 사업가, 지리학자를 만나 실망하기도 하
고, 자기 자신이 아닌 다른 누군가를 위해 열심히 일하는 가
로등지기에게 마음을 빼앗기기도 합니다. 
하지만 정직한 대화가 불가능했기에 이 어른들과 친구가 
될 수는 없었습니다. 
마지막 별 지구에 도착하여 처음 만난 뱀은 어린 왕자를

--- 

7776  
기록하지.”
“하지만 꺼진 화산들이 깨어날 수도 있어요. ‘덧없는’ 게 
뭐예요?”
어린 왕자가 말을 가로막았다.
“화산들이 꺼져 있든 깨어 있든 지리학자에겐 마찬가지
야. 우리에게 중요한 건 산이지. 산은 변하지 않거든.”
“그런데 ‘덧없는’ 게 뭐냐고요?”
일단 질문을 꺼내면 결코 포기해 본 적이 없는 어린 왕자
가 되물었다.
“그건 ‘곧 사라질 위험에 놓여 있다’는 뜻이란다.”
“내 꽃이 곧 사라질 위험에 놓여 있다고요?”
“그럼.”
‘자신의 꽃이 덧없는 존재라니? 세상에 대항할 무기라곤 
가시 네 개밖에 없는데! 그런데도 그 꽃을 내 별에 혼자 내버
려두고 오다니!’ 하는 생각이 들었다. 
어린 왕자로서는 처음으로 느끼는 후회의 감정이었다. 그
러나 그는 다시 용기를 냈다.
“할아버지 생각에 어디를 가보는 게 좋을까요?”
그가 물었다.
“지구라는 행성으로 가 봐. 평판이 좋으니…”
그래서 어린 왕자는 떠났다, 자기 꽃을 생각하면서.

--- 

36  
“도대체 가시는 왜 달려 있는 거냐고?”
어린 왕자는 일단 질문을 하면 절대 포기하지 않았다. 나는 나
사 때문에 신경이 날카로운 상태라 아무렇게나 대답해 버렸다.
“가시는 괜히 있는 거야. 꽃이 괜히 심통 부리는 거지.”
“아!”
그러나 잠시 잠자코 있던 어린 왕자가 나에게 앙갚음하듯 
쏘아붙였다.
“아저씨 말을 믿으라고? 꽃은 약해. 순진하기도 하고. 나름 자
신을 지켜 내지. 자기들이 대단한 줄 알지, 가시가 있으니까…”
아무 대꾸도 하지 않았다. 그 순간 나는 “이 볼트가 끝내 
빠지지 않으면 망치로 두들겨 부숴야지.” 하고 중얼거리고 
있었다. 어린 왕자는 또다시 내 생각을 방해했다.
“그럼 아저씨는 그렇게 믿는 거야. 꽃들이…”
“아니지! 그건 아니지! 난 아무것도 믿지 않아! 되는 대로 
대답한 거야. 심각한 일로 바쁘거든!”
깜짝 놀란 그가 나를 쏘아보았다.
“심각한 일이라고?”
시커먼 기름투성이 손가락으로 망치를 손에 든 채, 매우

--- 

어 나는 또 생각했다. 
‘이 잠든 어린 왕자가 나를 이토록 몹시 감동시키는 것은 
꽃 한 송이에 대한 그의 변함없는 사랑 때문이야, 잠들어 있
을 때에도 등불처럼 그의 마음속에서 타오르는 한 송이 장미
꽃 모습 때문이지…’
그러자 그가 더욱 더 부서지기 쉬운 존재로 여겨졌다. 등불
을 열심히 지켜야겠어. 한 줄기 바람에도 꺼져 버릴 테니… 
그리고 그렇게 걷다가 동틀 무렵 우물을 발견했다.
```

 최종 결과 분석:


   1. 비교할 수 없이 풍부해진 '답변 근거':
       * 이전에는 보이지 않던 여우와의 대화("길들인 것에 대한 책임"), 지리학자와의 대화("덧없는 존재"), 장미 정원을 보고 실망하는 장면 등, 질문의 핵심과 관련된 다양하고 깊이 있는 근거들을 대거 찾아왔습니다.
       * 이것이 바로 MultiQueryRetriever가 여러 관점에서 질문을 던져 핵심 정보를 정확히 찾아온 결과입니다.


   2. 한 차원 깊어진 'AI 답변':
       * 풍부해진 근거를 바탕으로, AI는 단순히 "소중하다"를 넘어 "특별한 연결고리", "우정과 사랑의 경험", "다른 꽃들과의 유사함에 대한 혼란" 등 복합적인 감정과 관계의 의미를 정확하게 짚어냈습니다.
       * 이는 좋은 재료(답변 근거)가 얼마나 좋은 요리(AI 답변)를 만드는지 명확하게 보여줍니다.


+추가 ReRanker

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어 가시 달린 꽃은 그의 사랑하는 장미꽃입니다. 처음에는 꽃을 사랑하고 소중히 여기지만, 꽃이 자신을 까탈스럽게 대해 귀찮아져서 새로운 친구와 일자리를 찾게 되고, 여섯 별을 유람하며 여러 사람들을 만나게 됩니다. 하지만 결국 어린 왕자는 가시 달린 꽃을 사랑하는 마음을 잊지 않고 있었음을 깨닫게 됩니다.
```

답변 근거 (Source Documents)

```
이 어린 왕자의 정체를 탐구하는 어른의 여정이 동시에 전개
되고 있습니다. 두 인물은 헤어지지만 서로 길들어 화자는 
별에 핀 꽃을 보며 별들의 웃음소리를 듣고, 어린 왕자는 사
막의 숨겨진 우물을 보고 남들에게는 들리지 않는 도르래 소
리를 들으며 행복하게 살아갑니다. 마음으로 세상을 보게 된 
것입니다.
사실 어린 왕자는 누구나 그러하듯 순수하기만 한 어린아
이가 아니었지요. 사랑을 모르던 그는 자신을 까탈스럽게 대
하는 장미가 귀찮아져 새로운 친구와 일자리를 구하고 깨달
음도 얻을 겸 여섯 별을 유람합니다. 우스꽝스러운 왕, 허영
쟁이, 술 아저씨, 사업가, 지리학자를 만나 실망하기도 하
고, 자기 자신이 아닌 다른 누군가를 위해 열심히 일하는 가
로등지기에게 마음을 빼앗기기도 합니다. 
하지만 정직한 대화가 불가능했기에 이 어른들과 친구가 
될 수는 없었습니다. 
마지막 별 지구에 도착하여 처음 만난 뱀은 어린 왕자를

--- 

키 작은 나무는 이내 성장을 멈추고 꽃 피울 준비를 했다. 어
린 왕자는 커다랗게 뻗어 가는 꽃망울을 지켜보다 거기에서 
어떤 기적이 나타나리라 직감하였다. 그러나 꽃은 초록 봉오
리 안에 숨어 미모를 다듬고 있었다. 꽃은 세심하게 색깔을

--- 

9392  
보는 척해줘야지. 안 그러면 내게 무안을 주려고 정말 죽어 
버릴지도 몰라…’
그러고는 이렇게 생각해 보았다.
‘이 세상에 단 한 송이뿐인 꽃을 갖고 있어 부자라고 믿었
는데. 그저 흔한 꽃을 갖고 있다니. 장미꽃 한 송이, 무릎밖
에 차지 않는 화산 세 개, 그것도 그중 하나는 영영 불이 꺼
져 버렸는지도 모르는데, 이걸로 진짜 위대한 왕자가 될 수
는 없어…’
그래서 어린 왕자는 풀밭에 엎드려 흐느껴 울었다.
ⅩⅩⅠ
그때 여우가 나타난 것이다.
“안녕.”
여우가 말했다.
“안녕.”
어린 왕자는 얌전히 대답하고 고개를 돌렸으나 아무것도 
보이지 않았다.
“난 여기, 사과나무 밑에 있어.”
좀 전의 그 목소리가 말했다.
“너는 누구지? 참 예쁘구나…”
어린 왕자가 말했다.
“난 여우야.”
여우가 말했다.
```



 최종 성능 비교 분석 (Reranker 적용 후)


  이전 단계 (Multi-Query Retriever)
   * 답변: "특별한 연결고리", "우정과 사랑", "혼란스러움" 등 관계의 '상태'를 설명하는 데 집중했습니다. 훌륭한 답변이었지만, 다소 정적이었습니다.


  최종 버전 (Multi-Query + Reranker)
   * 답변 근거: Reranker가 '답변 근거'의 순서를 효과적으로 재배치했습니다. 특히, 이전에는 보이지 않던 '역자 후기'의 일부(장미가 귀찮아져 별을 유람하는 동기)와 여우가 등장하는 장면을 핵심 근거로 끌어올렸습니다.
   * AI 답변: 그 결과, AI의 답변은 완전히 다른 차원이 되었습니다. 단순히 관계를 설명하는 것을 넘어, '사랑 → 갈등(귀찮아짐) → 여정 → 깨달음'으로 이어지는 하나의 완결된 서사(Narrative)를 만들어냈습니다.

  최종 결론


  이 최종 실험을 통해, 우리는 Reranker가 단순히 관련 문서를 찾는 것을 넘어, 답변의 서사적 깊이와 완성도를 높이는 데 결정적인 역할을 할 수 있음을 확인했습니다. 각 단계별 개선 사항을 정리하면 다음과 같습니다.


   1. Baseline: 부정확한 답변 생성
   2. Chunking/Prompt 개선: 정확하지만 다소 피상적인 답변 생성
   3. Multi-Query Retriever 추가: 여러 근거를 종합하여 관계를 입체적으로 설명
   4. Reranker 추가: 가장 핵심적인 근거들을 선별하여, 관계의 '서사'와 '변화 과정'까지 설명하는 완성도 높은 답변 생성









RAPTOR 방법론으로 구축하기

책 내용에 대해 질문하기

```
어린 왕자에게 있어 가시 달린 꽃은 어떤 존재인가요?
```

AI 답변

```
어린 왕자에게 있어 가시 달린 꽃은 자만심과 허영심을 상징하는 존재입니다. 꽃은 어린 왕자를 괴롭히고, 자신을 위해 어린 왕자가 노력하는 것을 무시하며 허영심을 부리는 모습을 보여줍니다. 이를 통해 어린 왕자는 어른들의 혼란과 오만을 비판하고, 진정한 사랑과 이해가 중요하다는 것을 깨닫게 됩니다.
```

답변 근거 (Source Documents)

```
어린 왕자는 꽃에 물을 주고 돌봐주는데, 꽃은 허영심을 피우며 어린 왕자를 괴롭힌다. 어린 왕자는 자신의 별을 정리하고 떠나는데, 양이 꽃을 먹었을까 먹지 않았을까에 대한 걱정으로 마음이 무거워진다. 이는 세상이 어떻게 변하는지에 대한 중요한 수수께끼이다.

--- 

어린 왕자는 가시가 있는 꽃의 의미를 질문하며, 어른들의 혼란과 오만을 비판한다. 그는 양과 꽃들의 전쟁이 중요하다고 주장하며, 어른들의 속물적인 가치관을 비판한다.

--- 

어린 왕자는 자신이 사랑하는 꽃을 위해 별들을 바라보며 행복해지는 것이 중요하다고 느끼고, 꽃을 위해 갑옷도 그려주고 싶어하지만 어떻게 다가갈지 망설이는데, 꽃은 자신을 향기롭게 하고 마음을 밝혀주었지만 그것을 이해하지 못한 자신을 후회한다.

--- 

어린 왕자는 지리학자와 대화하며 자신의 별과 꽃에 대한 이야기를 나누고, 꽃이 덧없는 존재임을 깨닫고 후회하지만 결국 용기를 내고 지구로 떠난다.

--- 

어린 왕자는 석양을 좋아하며 석양을 바라보는 것을 즐기는데, 어린 왕자의 작은 행성에서는 석양을 바라볼 수 있었고, 어린 왕자는 꽃과의 이별을 견뎌내며 서로를 이해하고 사랑하는 마음을 나누었다.
```

✦ 네, 최종 결과 잘 받았습니다. 이제 두 시스템의 결과를 나란히 놓고 비교하며 이 긴 여정의 마지막 결론을 내리겠습니다.

  최종 성능 비교 분석

  `app.py` (Multi-Query Retriever 방식)


   * 검색 방식: 질문을 여러 개로 변주하여, 원문에서 가장 관련성 높은 '날것의' 텍스트 조각들을 찾아왔습니다. (예: 여우와의 대화 전체, 장미 정원 장면 전체)
   * 답변 특징: 찾아온 여러 구체적인 사건들을 종합하여, 감정선과 서사를 중심으로 한 풍부한 답변을 생성했습니다.
      > "어린 왕자에게 있어 가시 달린 꽃은 자신의 장미와의 특별한 연결고리를 상징하는 존재입니다... 우정과 사랑을 경험하였기 때문에 다른 꽃들과의 유사함에 대해 혼란스러워하고 불행해하는 모습을 보입니다..."

  `raptor_app.py` (RAPTOR 방식)


   * 검색 방식: 문서를 재귀적으로 클러스터링하고 '요약'하여, 추상적인 주제 단위의 정보(요약문)를 찾아왔습니다.
   * 답변 특징: 검색된 '주제 요약'들을 바탕으로, 꽃의 상징성(자만심, 허영심)과 그를 통해 얻는 교훈(어른들의 오만 비판)을 중심으로 한 분석적이고 비평적인 답변을 생성했습니다.
      > "어린 왕자에게 있어 가시 달린 꽃은 자만심과 허영심을 상징하는 존재입니다... 이를 통해 어린 왕자는 어른들의 혼란과 오만을 비판하고, 진정한 사랑과 이해가 중요하다는 것을 깨닫게 됩니다."

  ---

  결론: 무엇이 더 좋은가?

  흥미롭게도, 어느 한쪽이 압도적으로 좋다기보다는, 두 시스템이 서로 다른 강점을 보여줍니다.


   * Multi-Query 방식은 '책의 내용과 감정선을 자세히 설명'하는 서술형 요약에 더 강점을 보입니다.
   * RAPTOR 방식은 '책의 주제와 상징성을 분석'하는 비평가적 분석에 더 강점을 보입니다.
